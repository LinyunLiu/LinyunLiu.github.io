<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MUSICS</title>
  <link rel="stylesheet" href="style-music.css" id="link">
  <link rel="icon" href="src/strawberry.png" type="image/x-icon">
  <script src="script.js"></script>
  <script>

    let audio;

    const musics = {
      "Today I Have Hurt Myself":"https://drive.google.com/uc?export=view&id=1YS5IEmspLqcElKjaMmt2wuQcVWKyorhd",
      "Knowing You":"https://drive.google.com/uc?export=view&id=1Go8mZuKwXiIMudsmL69GKdARtDOXL1_9",
      "Speechless":"https://drive.google.com/uc?export=view&id=1bGpvs5XXwpXCmXM1DiLlCMkr2Ip7eNw_",
      "A New Day":"https://drive.google.com/uc?export=view&id=1-twVhkpC6beO1ZmU1DVBa0xpBbdHvmRx"}
    const covers = {
      "Today I Have Hurt Myself":"https://drive.google.com/uc?export=view&id=1o1wISuMhiBKDpdHSLsdirAj0kCIQiuxX",
      "Knowing You":"https://drive.google.com/uc?export=view&id=13d6LgPWCaIqarHLNXxCe_eEdLeywVk9N",
      "Speechless":"https://drive.google.com/uc?export=view&id=1LNOp8_jbw3MYaRtlkP6yahAhP5U1qHIT",
      "A New Day":"https://drive.google.com/uc?export=view&id=1hf7-8W6y33-_YXlViD27qX1_lQ8dsINP"}
    const orders = ["Today I Have Hurt Myself", "Knowing You", "Speechless", "A New Day"];
    let index = 0;

    function load_page(){
      for (let i=0; i<orders.length; i++){
        const newDiv = document.createElement('div');
        newDiv.id = i.toString()
        newDiv.innerHTML = `<p onclick="select('${i.toString()}')">${orders[i]}</p>`;
        const container = document.getElementById('list');
        container.appendChild(newDiv);
      }
      select("0")
      loadSong("Today I Have Hurt Myself");
    }

    function select(ID){
      document.getElementById(index.toString()).style.backgroundColor = "#ffc70f00";
      document.getElementById(ID).style.backgroundColor = "#ffc70f90" ;
      index = parseInt(ID);
      loadSong(orders[ID]);
    }
    function loadSong(name){
      try{
        audio.pause()
      }
      catch(err){
        console.log("Error Occurs While Pausing Audio")
      }
      audio = new Audio(musics[name]);
      audio.load();
      // audio.play()
      document.getElementById("cover").src = covers[name];
      document.getElementById("play-pause").innerHTML = "&#x23F5";
    }

    function play(){
      if (audio.paused){
        audio.play();
        document.getElementById("play-pause").innerHTML = "&#x23F8";
      }
      else{
        audio.pause()
        document.getElementById("play-pause").innerHTML = "&#x23F5";
      }
    }

    function lastSong(){
      if (index > 0) {
        select((index-1).toString())
        loadSong(orders[index])
      }
    }
    function nextSong(){
      if (index < orders.length-1) {
        select((index+1).toString())
        loadSong(orders[index])
      }
    }


  </script>
</head>
<body onload="load_page()">
<div class="all">
  <div class="top-navi">
    <a href="index.html">Home</a>
    <a href="computing.html">Computing</a>
    <a href="artworks.html">Artworks</a>
    <a href="films.html">Films</a>
    <a class="active" href="musics.html">Musics</a>
    <a href="photo.html">Photography</a>
    <a href="blogs.html">Blogs</a>
  </div>
  <div class="main">
    <p class="title">Music Projects</p>
    <div class="player">
      <img class="cover" id="cover" src="" alt="">
      <div class="controls">
        <div class="list" id="list">
        <!--  Here to add items-->
        </div>
        <div class="buttons">
          <button class="back" onclick="lastSong()">Back</button>
          <button class="play-pause" onclick="play()" id="play-pause">&#x23F5</button>
          <button class="next" onclick="nextSong()">Next</button>
        </div>
      </div>
    </div>
  </div>
  <div class="foot-notes">
    <hr class="line">
    <div class="foot-notes-contents">
      <p class="foot-note-name">LINYUN LIU&nbsp;&nbsp;&nbsp;2023</p>
    </div>
  </div>
</div>
</body>
</html>